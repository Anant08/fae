var Accordion = {
	initialized: false, // used as a indicator that the Accordion was initially ran
	status: true, // used as an "off" and "on" flag for the general Accordion
	containter_selector: ".main_nav-accordion",
	trigger_selector: ".main_nav-link",
	sibling_selector: ".main_nav-sub-nav",
	current: null,
	
	navs: [
		// name: autogenerated,
		// container: parent of clickable element and subnav,
		// trigger: clickable element,
		// sibling: value,
		// opened: autogenerated boolean
	],

	init: function() {
		var that = this;

		// create an object of knowledge for each nav item
		$.each($(this.containter_selector), function(index, container){
			that.navs.push({
				name: "nav" + index,
				container: $(this),
				trigger: $(this).find(that.trigger_selector),
				subnav: $(this).find(that.sibling_selector),
				opened: false
			});
		});

		// assign events 
		this.clicker();
		// this.resizer();
	},

	resizer: function () {
		var that = this;
		if (this.initialized === false) {
			$(window).on("resize", function(){
				if ($(window).width() < Admin.breakpoints.desktop) {
					that.destroy();
				} else if ($(window).width() >= Admin.breakpoints.desktop) {
					that.init();
				}
			});

			this.initialized = true;
		}
	},

	clicker: function() {
		var that = this;

		$.each(this.navs, function(index, nav){
			$(nav.trigger).click(function(e){
				// prevent default
				e.preventDefault();

				if (nav.opened) {
					// close all first
					that.closeAll();
				} else {
					// close all first
					that.closeAll();

					//open the clicked item if it was not just opened
					that.open(nav);
				}
			});
		});
	},

	destroy: function() {
		this.closeAll();
		// unbind it all
		$.each(this.navs, function(index, nav){
			$(nav.trigger).off();
		});

		// remove the thoughts of the nav
		this.navs = [];
		// remove any style attribute
		$(this.sibling_selector).removeAttr("style");
	},

	close: function(nav) {
		$(nav.container).removeClass("accordion-open");
		$(nav.subnav).stop().slideUp();
		nav.opened = false;
	},

	closeAll: function() {
		var that = this;

		$.each(this.navs, function(index, nav){
			that.close(nav);
		});
	},

	open: function(nav) {
		$(nav.container).addClass("accordion-open");
		$(nav.subnav).stop().slideDown();
		nav.opened = true;
	}
};